{"version":3,"file":"index.mjs","sources":["../../node_modules/tslib/tslib.es6.js","../../node_modules/mrba-eshper/dist/esm/index.mjs","../../src/core/TypeDefinitions.ts","../../src/utils/CCUtils.ts","../../src/core/ResourceManager/ResConfig.ts","../../src/core/ResourceManager/ResourceManager.ts","../../src/core/UIManager/UIBase.ts","../../src/core/UIManager/UIConfig.ts","../../src/core/UIManager/UIManager.ts","../../src/core/EventManager/EventManager.ts","../../src/core/SceneManager/SceneScriptManager.ts","../../src/core/SceneManager/SceneManager.ts","../../src/facades/Managements.ts","../../src/CCHperEntry.ts","../../src/utils/Platform.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import r from\"moment\";function t(r,...t){return t.reduce(((r,t,o)=>r.replace(`{${o}}`,t)),r)}function o(r,t,...e){if(\"function\"==typeof r)return Reflect.apply(r,t,e);if(\"object\"==typeof r){let n=Reflect.get(r,t,e);if(void 0===n)return;return o(n,r,...e)}return null}function e(r,t,o){let e=0,n=()=>{++e>=r.length&&o()};for(let o of r)t(o,n)}class n{static Register(r){r.info&&(this.info=r.info),r.warn&&(this.warn=r.warn),r.error&&(this.error=r.error)}static Log(r,...t){n.doLogger(this.info,r,...t)}static Warn(r,...t){n.doLogger(this.warn,r,...t)}static Error(r,...t){n.doLogger(this.error,r,...t)}static doLogger(t,o,...e){let n=r().format(\"YYYY-MM-DD HH:mm:ss.SSS\")+\": \";\"string\"==typeof o?t(n+o,...e):t(n,o)}}n.info=console.log,n.warn=console.warn,n.error=console.error;const c=Symbol(),i=r=>new Proxy(r,{construct:(r,t,o)=>r.prototype!==o.prototype?Reflect.construct(r,t,o):(r[c]||(r[c]=Reflect.construct(r,t,o)),r[c])});function f(r){return null!=r}export{o as CallFunction,t as FormatString,n as Logger,e as ParallelForEach,c as SINGLETON_KEY,f as isset,i as singleton};\n","import { __private } from \"cc\";\nimport { CallFunction } from \"mrba-eshper\";\nimport { UIBase } from \"./UIManager/UIBase\";\n\nexport const PersistSceneName:string = 'Persistence';\nexport const StartSceneName:string = 'SceneEntry';\n\nexport type Constructor<T = {}> = new (...args: any[]) => T;\n\nexport abstract class ISceneScript{}\n\nexport class MetaData{\n    private static sceneScriptClasses:Map<string,Constructor> = new Map<string,Constructor>();\n    public static IsSceneScriptRegistered(scriptName:string):boolean{\n        return this.sceneScriptClasses.has(scriptName);\n    }\n    public static GetSceneScriptConstrutor(scriptName:string):Constructor|null{\n        if(!this.IsSceneScriptRegistered(scriptName)) return null;\n        return this.sceneScriptClasses.get(scriptName)??null;\n    }\n\n    private static uiClassNamesMap:Map<string,string> = new Map<string,string>();\n    private static uiScriptClasses:Map<string,__private.Constructor<UIBase>> = new Map<string,__private.Constructor<UIBase>>();\n\n    public static IsUIScriptRegistered(scriptName:string):boolean;\n    public static IsUIScriptRegistered<T extends UIBase>(scriptClass:__private.Constructor<T>):boolean;\n    public static IsUIScriptRegistered(target:any):boolean{\n        if(typeof target===\"string\") return this.uiScriptClasses.has(target);\n        let _className = target.prototype.constructor.name;\n        if(!this.uiClassNamesMap.has(_className)) return false;\n        return this.uiScriptClasses.has(this.uiClassNamesMap.get(_className)!);\n    }\n\n    public static GetUIScriptConstructor(scriptName:string): __private.Constructor<UIBase>|null{\n        return this.uiScriptClasses.get(scriptName)??null;\n    }\n\n    public static GetUIClassRegisteredName<T extends UIBase>(uiScriptConstructor:__private.Constructor<T>):string|null{\n        return this.uiClassNamesMap.get(uiScriptConstructor.prototype.constructor.name)??null;\n    }\n}\n\n/**\n * 注册UI脚本\n * @param className 脚本名称\n */\nexport const ui_script = <T extends UIBase>(className:string)=>(target:new(...args:any[])=>T)=>{\n    CallFunction(Reflect.get(MetaData,\"uiClassNamesMap\"),\"set\",target.prototype.constructor.name, className);\n    CallFunction(Reflect.get(MetaData,\"uiScriptClasses\"),\"set\",className, target);\n}\n\n/**\n * 注册场景脚本\n * @param classname 场景脚本名称\n */\nexport const scene_script = <T extends ISceneScript>(classname:string)=>(target:new(...args:any[])=>any)=>{\n    CallFunction(Reflect.get(MetaData,\"sceneScriptClasses\"), \"set\", classname,target);\n}","import { Asset, Component, find, Material, Node, Prefab, SpriteFrame, Texture2D, __private } from \"cc\";\n\nexport class BaseComponent extends Component{\n    protected Get(path:string):Node|null;\n    protected Get<T extends Component>(path:string, classConstructor: __private.Constructor<T>):T|null;\n    protected Get(path:string, classConstructor?:any):any{\n        if(classConstructor===undefined){\n            return find(path,this.node);\n        }\n        var _node = find(path, this.node);\n        if(_node===null) return null;\n        return _node.getComponent(classConstructor);\n    }\n}\n\nexport function mapString2CCAssetType(classname:string):__private.cocos_core_asset_manager_shared_AssetType{\n    let _ccclass:__private.cocos_core_asset_manager_shared_AssetType = Asset;\n    switch (classname) {\n        case 'Prefab':\n            _ccclass=Prefab;\n            break;\n        case 'SpriteFrame':\n            _ccclass = SpriteFrame;\n            break;\n        case 'Texture2D':\n            _ccclass = Texture2D;\n            break;\n        case 'Material':\n            _ccclass = Material;\n            break;\n        default:\n            break;\n    }\n    return _ccclass;\n}","import { JsonAsset, resources, __private } from \"cc\";\nimport { isset, singleton } from \"mrba-eshper\";\nimport { mapString2CCAssetType } from \"../../utils/CCUtils\";\nimport { PersistSceneName } from \"../TypeDefinitions\";\n\n\ninterface ResNodeInfo{\n    type:string,\n    url:string\n}\n\ninterface ResConfigDescriptor{\n    [name:string]:{\n        autoRelease:boolean,\n        bundle:string,\n        assets:ResNodeInfo[]\n    }\n}\n\nexport interface AssetDirInfo{\n    sceneName:string,       // 所属场景\n    url:string,             // 资源文件夹url\n    bundleName:string,      // 所属包名\n    path:string,         // 资源文件夹\n    type:__private.cocos_core_asset_manager_shared_AssetType        // 资源类型\n}\n\n@singleton\nexport class ResConfig{ \n    /**\n     * 资源配置\n     */\n    config:ResConfigDescriptor={};\n    /**\n     * 资源url与场景名称的映射\n     */\n    pathsGroupByScene:Map<string,string> = new Map<string,string>();\n\n    /**\n     * 资源url与url文件夹下的资源列表关系映射\n     */\n    assetsGroupByUrl:Map<string,Set<string>> = new Map<string,Set<string>>();\n\n    Load(asset?:JsonAsset){\n        return new Promise((resolve:(_config:ResConfigDescriptor)=>void,reject)=>{\n            if(isset(asset)){\n                this.build(asset!);\n                resolve(this.config);\n                return;\n            }\n            resources.load(\"configs/res\",JsonAsset,(_error,_data)=>{\n                if(_error!==undefined){\n                    reject(_error);\n                    return;\n                } \n                this.build(_data);\n                resolve(this.config);\n            });\n        });\n    }\n\n    private build(asset:JsonAsset){\n        let _obj = asset.json;\n        this.config = <ResConfigDescriptor>_obj;\n        this.buildPathesGroupByScene();\n    }\n\n    public IsAutoRelease(sceneName:string):boolean{\n        return this.config[sceneName].autoRelease??false;\n    }\n\n    public SyncUrlAsset(url:string,assetKey:string){\n        if(!this.assetsGroupByUrl.has(url))\n            this.assetsGroupByUrl.set(url, new Set<string>());\n        this.assetsGroupByUrl.get(url)!.add(assetKey);\n    }\n\n    public GetAssetNamesByUrl(url:string):Array<string>{\n        if(!this.assetsGroupByUrl.has(url)) return[];\n        return Array.from(this.assetsGroupByUrl.get(url)!);\n    }\n\n    public GetSceneInfo(sceneName:string){\n        return this.config[sceneName];\n    }\n\n    /**\n     * \n     * @param 获取指定场景下的资源包名称\n     */\n    public getBundles(scene:string):string[]{\n        let _node = this.config[scene];\n        if(_node===undefined) return [];\n        return Array.from(new Set(_node.assets.map(_=>this.buildAssetDirInfo(_)!.bundleName)));\n    }\n\n    /**\n     * \n     * @param sceneNames 获取多个场景下的资源包 默认包含Persistence场景资源\n     */\n    public getScenesBundles(sceneNames:string[]):string[]{\n        return Array.from(new Set(sceneNames.reduce((_bundles,_sceneName)=>\n                _bundles.concat(this.getBundles(_sceneName))\n            ,this.getBundles(PersistSceneName))));\n    }\n\n    /**\n     * 获取scene场景下所有文件夹信息\n     * @param scene \n     */\n    public getSceneDirs(scene:string):AssetDirInfo[]{\n        let _node = this.config[scene];\n        if(_node===undefined) return[];\n        return _node.assets.map(_=>this.buildAssetDirInfo(_)!)   \n    }\n\n    /**\n     * 获取scene场景下 bundleName包 的所有文件夹信息\n     * @param scene \n     * @param bundleName \n     */\n    public getBundleDirs(scene:string, bundleName:string):AssetDirInfo[]{\n        let _node = this.config[scene];\n        if(_node===undefined) return[];\n\n        return this.getSceneDirs(scene)\n                .filter(_assetUrl=>_assetUrl.bundleName===bundleName);\n    }\n\n    /**\n     * 获取多场景下的某个bundle 对应的文件夹列表  (默认包含Persistence场景)\n     * @param sceneNames 场景名称\n     * @param bundleName 包名\n     */\n    public getScenesBundleDirs(sceneNames:string[], bundleName:string):AssetDirInfo[]{\n        return sceneNames.reduce((_dirs, _sceneName)=>\n                _dirs.concat(this.getBundleDirs(_sceneName,bundleName)),\n            this.getBundleDirs(PersistSceneName,bundleName));\n    }\n\n    /**\n     * \n     * @param url example  'resources://prefabs/uis'\n     */\n    public buildAssetDirInfo(dirNode:ResNodeInfo):AssetDirInfo|null{\n        let _url = dirNode.url;\n\n        let _bundleRegex = /.*\\:\\/\\//;\n        let _result = _bundleRegex.exec(_url);\n        \n        if(_result===null) return null;\n        let _bundleName = (<RegExpExecArray>_result)[0].slice(0,-3);\n\n        let _pathRegex = /\\:\\/\\/.*/;\n        _result = _pathRegex.exec(_url);\n\n        if(_result===null) return null\n        let _path = (<RegExpExecArray>_result)[0].slice(3);\n        return {\n            sceneName:this.GetSceneNameByUrl(_url),   // TODO 赋值场景名\n            url:_url,\n            bundleName:_bundleName,\n            path:_path,\n            type:mapString2CCAssetType(dirNode.type)\n        };\n    }\n\n    public GetSceneNameByUrl(url:string):string{\n        return this.pathsGroupByScene.get(url)??PersistSceneName;\n    }\n\n    buildPathesGroupByScene(){\n        this.pathsGroupByScene.clear();\n        Object.keys(this.config).forEach(_scene=>{\n            var _sceneAssets = this.config[_scene];\n            _sceneAssets.assets.forEach(_dir=>{\n                this.pathsGroupByScene.set(_dir.url,_scene);\n            });\n        });\n    }\n}","import { Asset, AssetManager, assetManager, director, Director, JsonAsset, resources, SceneAsset, __private } from \"cc\";\nimport { isset, ParallelForEach, Logger, singleton } from \"mrba-eshper\";\nimport { PersistSceneName, StartSceneName } from \"../TypeDefinitions\";\nimport { AssetDirInfo, ResConfig } from \"./ResConfig\";\n\n@singleton\nexport class ResourceManager\n{\n    public static readonly Instance:ResourceManager;\n    //config:ResConfig = {};\n    // 按照 bundle 名称分组资源\n    private assets_gby_Bundle:Map<string,Map<string,Asset>> = new Map<string,Map<string,Asset>>();\n    // 按照场景名称 分组资源\n    private assets_gby_Scene:Map<string,Map<string,Asset>> = new Map<string,Map<string,Asset>>();\n\n    private bundles:Map<string,AssetManager.Bundle> = new Map<string,AssetManager.Bundle>();\n    private config:ResConfig = new ResConfig();\n\n    constructor(){\n        Reflect.set(ResourceManager,\"Instance\",this);\n    }\n    /**\n     * 初始化\n     */\n    private initialize(asset?:JsonAsset){\n        return new Promise((resolve,reject)=>{\n            this.config.Load(asset).then(_config=>{\n                resolve(undefined);\n            }).catch();\n        });\n    }\n\n \n    public loadScene(sceneName:string, progress: Director.OnLoadSceneProgress, launched:Director.OnSceneLaunched){\n        if(sceneName===StartSceneName) {\n            progress(1,1,undefined);\n            launched(null,undefined);\n            return;\n        }\n\n        let _sceneInfo = this.config.GetSceneInfo(sceneName);\n        let _bundleName = _sceneInfo.bundle;\n        if(!isset(_sceneInfo.bundle))\n        {\n            director.preloadScene(sceneName,\n                (completedCount: number, totalCount: number, item: any)=>{\n                    progress(completedCount, totalCount, item);\n                },(error: null | Error, sceneAsset?: SceneAsset)=>{\n                    director.loadScene(sceneName, launched);\n                });\n            return;\n        }\n\n        this.pullBundle(_bundleName!).then(_bundle=>{\n            _bundle.loadScene(sceneName,\n                (completedCount: number, totalCount: number, item: any)=>{\n                    progress(completedCount, totalCount, item);\n                },(error, sceneAsset)=>{\n                    director.loadScene(sceneName, launched);\n                });\n        })\n    }\n\n    public LoadSceneRes(sceneNames:string[]){\n        return new Promise((resolve,reject)=>{\n            this.unloadSceneRes(this.curSceneName);\n\n            this.loadNewSceneRes(sceneNames).then(()=>{\n                resolve(undefined);\n            }).catch(reject);\n        });\n    }\n\n    private unloadSceneRes(sceneName:string){\n        console.log(\"unload scene %s\", sceneName);\n        \n        if(!this.config.IsAutoRelease(sceneName)) return;\n        // 要卸载哪些文件夹?\n        let _sceneDirs = this.config.getSceneDirs(sceneName);\n        _sceneDirs.forEach(_assetDir=>{\n            this.bundles.get(_assetDir.bundleName)?.release(_assetDir.path,_assetDir.type);\n        });\n\n        let _releasedAssetKeys = _sceneDirs.map(_dir=>_dir.url)\n            .reduce((_assetsNames, _url)=>this.config.GetAssetNamesByUrl(_url),new Array<string>());\n\n        let _sceneBundles = this.config.getBundles(sceneName);\n\n        // 同步bundles资源映射\n        Array.from(this.assets_gby_Bundle.keys()).filter(_bundleKey=>_sceneBundles.includes(_bundleKey)).forEach(_bundleName=>{\n            Array.from(this.assets_gby_Bundle.get(_bundleName)!.keys())\n                .filter(_assetKey=>_releasedAssetKeys.includes(_assetKey))\n                .forEach(_assetKey=>{\n                    this.assets_gby_Bundle.get(_bundleName)!.delete(_assetKey);\n                    console.log(\"移除%s包 %s资源\",_bundleName, _assetKey);\n                });\n        });\n\n        // 同步场景资源映射\n        if(! this.assets_gby_Scene.has(sceneName)) return;\n        Array.from(this.assets_gby_Scene.get(sceneName)!.keys()).forEach(_assetKey=>{\n            if(!_releasedAssetKeys.includes(_assetKey)) return;\n            this.assets_gby_Scene.get(sceneName)!.delete(_assetKey);\n            console.log(\"移除%s场景 %s资源\",sceneName, _assetKey);\n        });\n    }\n\n    private loadNewSceneRes(sceneNames:string[])\n    {\n        return new Promise((resolve,reject)=>{\n            console.log(\"加载自定义场景资源: \", sceneNames[0]);\n            let _bundles:string[] = this.config.getScenesBundles(sceneNames);\n            console.log(\"包列表\", _bundles);\n            // Start load bundles\n            ParallelForEach(_bundles,(_key,_finishLoadBundleStep)=>{\n                let _bundleName = _key;\n                this.pullBundle(_bundleName).then(_bundle=>{\n                    /// Start 加载bundle下的文件夹\n                    ParallelForEach(this.config.getScenesBundleDirs(sceneNames, _bundleName),(_assetDir,_loadDirStepFinished)=>{\n                        this.loadResourceDir(_assetDir).then(assetsMap=>{\n                            let _resUrl = _assetDir.url;\n                            let _resSceneKey:string = _assetDir.sceneName;\n\n                            if(!this.assets_gby_Bundle.has(_bundleName)){\n                                this.assets_gby_Bundle.set(_bundleName, new Map<string,Asset>());\n                            }\n\n                            if(!this.assets_gby_Scene.has(_resSceneKey)){\n                                this.assets_gby_Scene.set(_resSceneKey, new Map<string,Asset>());\n                            }\n                            \n                            for(let _key of assetsMap.keys()){\n                                Logger.Log(\"%s load asset %s\",_bundleName,_key);\n                                Logger.Log(\"%s load asset %s\",_resSceneKey,_key);\n                                this.assets_gby_Bundle.get(_bundleName)?.set(_key,<Asset>assetsMap.get(_key));\n                                this.assets_gby_Scene.get(_resSceneKey)?.set(_key,<Asset>assetsMap.get(_key));\n                                this.config.SyncUrlAsset(_resUrl, _key);\n                            }\n\n                            _loadDirStepFinished();\n                        });\n                    },()=>{\n                        _finishLoadBundleStep();\n                    });\n                    ///  End\n\n                }).catch(error=>{\n                    reject(error);\n                    _finishLoadBundleStep();\n                });\n                \n            },()=>{\n                console.log('finished');\n                resolve(undefined);\n            });\n            // End load bundles\n            \n\n        });\n    }\n\n    private sceneName:string=\"\";\n    private get curSceneName():string{\n        return this.sceneName;\n    }\n\n    public Get<T extends Asset>(key:string, sceneName?:string){\n        console.log(this.assets_gby_Scene);\n        let _asset = this.GetPersist<T>(key);\n        if(!isset(_asset))\n            _asset = this.GetScene<T>(key,sceneName??this.curSceneName);\n        return _asset;\n    }\n\n\n    public GetPersist<T extends Asset>(key:string):T|null{\n        return <T>this.assets_gby_Scene.get(PersistSceneName)?.get(key);\n    }\n\n    public GetScene<T extends Asset>(key:string, sceneName:string):T|null{\n        return <T>this.assets_gby_Scene.get(sceneName)?.get(key);\n    }\n\n    private pullBundle(bundleName:string)\n    {\n        return new Promise((resolve:(bundle:AssetManager.Bundle)=>void,reject)=>{\n            \n            if(this.bundles.has(bundleName)){\n                resolve(<AssetManager.Bundle>this.bundles.get(bundleName));\n                return;\n            }else if(bundleName==='resources'){\n                this.bundles.set(\"resources\",resources);\n                resolve(resources);\n                return;\n            }\n\n            \n            assetManager.loadBundle(bundleName,(_error,_bundle)=>{\n                if(isset(_error)) reject('load bundle error');\n                if(!isset(_bundle)) reject('load bundle error');\n\n                this.bundles.set(bundleName,_bundle!);\n                resolve(_bundle!);\n            });\n        });\n    }\n\n    private preloadDir(bundle:AssetManager.Bundle, dir:string, type:__private.cocos_core_asset_manager_shared_AssetType)\n    {\n        let _pathes = bundle.getDirWithPath(dir,type);\n        _pathes.forEach(_path=>{\n            console.log(_path.path);\n        })\n    }\n\n    private loadResourceDir(assetDir:AssetDirInfo){\n        return new Promise((resolve:(res:Map<string,Asset>)=>void,reject)=>{\n            let _bundleName = assetDir.bundleName;\n            let _resPath = assetDir.path;\n            this.pullBundle(_bundleName).then(_bundle=>{\n                _bundle.loadDir(_resPath, assetDir.type, (_error,_data)=>{\n                    if(_error!==undefined){\n                        reject(_error);\n                    }\n                    let _res:Map<string,Asset> = new Map<string,Asset>();\n                    _data?.forEach(_item=>{\n                        let _info = <{path:string,uuid:string}>_bundle.getAssetInfo(_item._uuid);\n                        let _name = _info.path.split('/').pop();\n                        if(_name===undefined) return;\n                        _res.set(_name, _item);\n                    });\n                    resolve(_res);\n                });\n\n            }).catch(reject);\n        });\n    }\n}\n","\nimport { BaseComponent } from \"../../utils/CCUtils\";\n\nexport enum UIType{\n    Standalone=\"Standalone\",\n    Normal=\"Normal\",\n    Popup=\"Popup\"\n}\n\nexport class UIBase extends BaseComponent{\n    protected __uiKey:string;\n    protected __uiType:UIType = UIType.Normal;\n    protected isShowing:boolean = false;\n\n    public get UIKey():string{ return this.__uiKey;}\n    public get UIType():UIType{ return this.__uiType;}\n    public get Actived():boolean{ return this.isShowing;}\n\n    protected spawned(){}\n\n    protected onShow(){}\n    protected onHide(){}\n\n    private handleShow():void{\n        this.isShowing = true;\n        this.showAction();\n        this.onShow();\n    }\n    \n    private handleHide():void{\n        this.isShowing = false;\n        this.hideAction();\n        this.onHide();\n    }\n\n    protected showAction():void{\n        this.node.active = true;\n    }\n\n    protected hideAction():void{\n        this.node.active = false;\n    }\n\n}","import { JsonAsset, resources } from \"cc\";\nimport { isset, singleton } from \"mrba-eshper\";\nimport { PersistSceneName } from \"../TypeDefinitions\";\n\nexport interface UINodeInfo{\n    name:string,\n    script:string,\n    asset:string,\n    type:string\n}\n\ninterface UIConfigDescriptor{\n    [name:string]:UINodeInfo[]\n}\n\n@singleton\nexport class UIConfig{\n    config:UIConfigDescriptor={};\n    uis:Map<string,UINodeInfo> = new Map<string,UINodeInfo>();\n    \n    public Load(asset?:JsonAsset){\n        return new Promise((resolve:(_config:UIConfigDescriptor)=>void,reject)=>{\n            if(isset(asset)){\n                this.build(asset!);\n                resolve(this.config);\n                return;\n            }\n            resources.load(\"configs/uis\",JsonAsset,(_error,_data)=>{\n                if(_error!==undefined){\n                    reject(_error);\n                    return;\n                } \n                this.build(_data);\n                resolve(this.config);\n            });\n        });\n    }\n\n    private build(asset:JsonAsset)\n    {\n        let _obj = asset.json;\n        this.config = <UIConfigDescriptor>_obj;\n        Object.keys(this.config)\n            .reduce((_uis,_sceneKey)=>_uis.concat(this.config[_sceneKey]),new Array<UINodeInfo>())\n            .reduce((_uis,_uiNode)=>_uis.set(_uiNode.name,_uiNode),this.uis);\n    }\n\n    public GetSceneUIs(sceneName:string) : UINodeInfo[]\n    {\n        return this.getPersistUIs().concat(this.customSceneUIs(sceneName));\n    }\n\n    public ConvertUIKeys2UINodeInfo(keys:string[]) : UINodeInfo[]\n    {\n        return keys.map(_key=>this.uis.get(_key)).filter(_ui=>isset(_ui)) as UINodeInfo[];\n    }\n\n    private getPersistUIs(){\n        if(this.config[PersistSceneName]===undefined) return [];\n        return this.config[PersistSceneName];\n    }\n\n    private customSceneUIs(sceneName:string){\n        if(this.config[sceneName]===undefined) return [];\n        return this.config[sceneName];\n    }\n\n    \n}","\nimport { _decorator, Component, Node, find, __private, Prefab, instantiate, Constructor, JsonAsset } from 'cc';\nimport { Logger, isset, CallFunction } from 'mrba-eshper';\nimport { ResourceManager } from '../ResourceManager/ResourceManager';\nimport { MetaData } from '../TypeDefinitions';\nimport { UIBase, UIType } from './UIBase';\nimport { UIConfig, UINodeInfo } from './UIConfig';\nconst { ccclass, executionOrder } = _decorator;\n\n@ccclass\n@executionOrder(-1001)\nexport class UIManager extends Component\n{\n    public static readonly Instance:UIManager;\n    private StandaloneUIRoot:Node;\n    private NormalUIRoot:Node;\n    private PopupUIRoot:Node;\n    private config:UIConfig = new UIConfig();\n\n    private allSpawnedUICaches:Map<string,UIBase> = new Map<string,UIBase>();\n\n    // 实时 UI 数据\n    private standaloneUIs:Map<string,UIBase> = new Map<string,UIBase>();\n    private normalUIs:Map<string,UIBase> = new Map<string,UIBase>();\n    private popupUIs:Array<UIBase> = new Array<UIBase>();\n\n    constructor(){\n        super();\n        Reflect.set(UIManager,\"Instance\",this);\n    }\n    \n    onLoad(){\n        Logger.Warn(UIManager.Instance);\n    }\n\n    private initialize(asset?:JsonAsset){\n        return new Promise((resolve,reject)=>{\n            this.StandaloneUIRoot = find(\"StandaloneUI\",this.node)!;\n            this.NormalUIRoot = find(\"NormalUI\",this.node)!;\n            this.PopupUIRoot = find(\"PopupUI\",this.node)!;\n\n            this.config.Load(asset).then(_config=>{\n               resolve(undefined);\n            });\n        });\n    }\n\n    /**\n     * 获取UI实例\n     * @param UIKey UI名称\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Get(UIKey:string, callback?:(ui:UIBase)=>void):UIBase|null;\n    /**\n     * 获取UI实例\n     * @param UIClass UI类型\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Get<T extends UIBase>(UIClass:Constructor<T>, callback?:(ui:T)=>void):T|null;\n    public Get(UIKey:any, callback:(ui:any)=>void):any{\n        if(typeof UIKey === \"string\"){\n            return this.getUI(UIKey, _ui=>{\n                if(isset(callback)) callback!(_ui);\n            });\n        }\n        if(!MetaData.IsUIScriptRegistered(UIKey)) return null;\n\n        return this.getUI(MetaData.GetUIClassRegisteredName(UIKey)!,_ui=>{\n            if(isset(callback)) callback!(_ui);\n        });\n    }\n\n    /**\n     * 显示UI\n     * @param UIKey UI名称\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Show(UIKey:string, callback?:(ui:UIBase)=>void):UIBase|null;\n    /**\n     * 显示UI\n     * @param UIClass UI类型\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Show<T extends UIBase>(UIClass:Constructor<T>, callback?:(ui:T)=>void):T|null;\n    public Show(UIKey:any, callback:(ui:any)=>void):any\n    {\n        if(typeof UIKey==='string'){\n            return this.showUI(UIKey,_ui=>{\n                if(isset(callback))\n                    callback!(_ui);\n            });\n        }\n\n        if(!MetaData.IsUIScriptRegistered(UIKey)) return null;\n        return this.showUI(MetaData.GetUIClassRegisteredName(UIKey)!,\n            _ui=>{\n                if(isset(callback))\n                    callback!(_ui);\n            });\n    }\n\n    /**\n     * 隐藏UI\n     * @param UIKey UI名称\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Hide(UIKey:string, callback?:(ui:UIBase)=>void) : UIBase|null;\n    /**\n     * 隐藏UI\n     * @param UIClass UI类型\n     * @param callback 成功获取到UI实例后的回调 失败无回调\n     */\n    public Hide<T extends UIBase>(UIClass:Constructor<T>, callback?:(ui:T)=>void):T|null;\n    public Hide(UIKey:any, callback:(ui:any)=>void):any{\n        if(typeof UIKey===\"string\"){\n            return this.hideUI(UIKey,_ui=>{\n                if(isset(callback)) callback!(_ui);\n            });\n        }\n\n        if(!MetaData.IsUIScriptRegistered(UIKey)) return;\n        return this.hideUI(MetaData.GetUIClassRegisteredName(UIKey)!,\n            _ui=>{\n                if(isset(callback)) callback!(_ui);\n            });\n    }\n\n    private hideUI(UIKey:string, callback:(ui:UIBase)=>void):UIBase|null{\n        let _uiComponent = this.getUI(UIKey);\n        if(!isset(_uiComponent)){\n            Logger.Warn(\"hide ui %s failed, ui not exists.\",UIKey);\n            return _uiComponent;\n        }\n        let _uiType =  _uiComponent!.UIType;\n        switch (_uiType) {\n            case UIType.Standalone:\n                this.hideStandaloneUI(UIKey);\n                break;\n            case UIType.Normal:\n                this.hideNormalUI(UIKey);\n                break;\n            case UIType.Popup:\n                this.hidePopupUI(UIKey);\n                break;\n            default:\n                break;\n        }\n        callback(_uiComponent!);\n        return _uiComponent;\n    }\n\n    private showUI(UIKey:string, callback:(ui:UIBase)=>void):UIBase|null{\n        let _uiComponent = this.getUI(UIKey);\n        console.log(_uiComponent);\n        \n        if(!isset(_uiComponent)){\n            Logger.Warn(\"show ui %s failed, ui not exists.\",UIKey);\n            return _uiComponent;\n        }\n        console.log(_uiComponent);\n        \n        let _uiType =  _uiComponent!.UIType;\n        console.log(_uiType);\n        switch (_uiType) {\n            case UIType.Standalone:\n                this.showStandaloneUI(UIKey);\n                break;\n            case UIType.Normal:\n                this.showNormalUI(UIKey);\n                break;\n            case UIType.Popup:\n                this.showPopupUI(UIKey);\n                break;\n            default:\n                break;\n        }\n        callback(_uiComponent!);\n        return _uiComponent;\n    }\n\n    private getUI(UIKey:string, callback?:(ui:UIBase)=>void):UIBase|null{\n        if(!this.allSpawnedUICaches.has(UIKey)) return null;\n        let _uiComponent = this.allSpawnedUICaches.get(UIKey)!;\n        if(isset(callback)) callback!(_uiComponent);\n        return _uiComponent;\n    }\n\n    private showStandaloneUI(uiKey:string){\n        let _uiComponent = this.getUI(uiKey) as UIBase;\n\n        [...this.standaloneUIs.values()].filter(_ui=>_ui.UIKey!=uiKey).forEach(_ui=>{\n            CallFunction(_ui,\"handleHide\");\n        });\n\n        if(!_uiComponent.Actived) \n            CallFunction(_uiComponent, \"handleShow\");\n\n        if(this.standaloneUIs.has(uiKey))\n            this.standaloneUIs.set(uiKey,_uiComponent);\n    }\n\n    private hideStandaloneUI(uiKey:string){\n        if(!this.standaloneUIs.has(uiKey)) return;\n        let _uiComponent = this.standaloneUIs.get(uiKey)!;\n\n        if(_uiComponent.Actived){\n            CallFunction(_uiComponent,\"handleHide\");\n            this.standaloneUIs.delete(uiKey);\n        }\n        \n        let _lastUIKey = Array.from(this.standaloneUIs.keys()).pop();\n        if(!isset(_lastUIKey)) return;\n        CallFunction(this.standaloneUIs.get(_lastUIKey!)!, \"handleShow\");\n    }\n\n    private showNormalUI(uiKey:string){\n        if(this.normalUIs.has(uiKey)) return;\n\n        let _uiComponent = this.getUI(uiKey) as UIBase;\n        CallFunction(_uiComponent,\"handleShow\");\n        this.normalUIs.set(uiKey, _uiComponent);\n    }\n\n    private hideNormalUI(uiKey:string){\n        if(!this.normalUIs.has(uiKey)) return;\n\n        let _uiComponent = this.normalUIs.get(uiKey)!;\n        CallFunction(_uiComponent,\"handleHide\");\n\n        this.normalUIs.delete(uiKey);\n    }\n\n    private showPopupUI(uiKey:string){\n        let _uiComponent = this.getUI(uiKey) as UIBase;\n        if(!this.popupUIs.includes(_uiComponent)){\n            this.popupUIs.push(_uiComponent);\n        }else{\n            this.popupUIs.splice(this.popupUIs.indexOf(_uiComponent),1);\n            this.popupUIs.push(_uiComponent);\n        }\n\n        if(!_uiComponent.Actived)\n        {\n            CallFunction(_uiComponent,\"handleShow\");\n        }\n        \n        let _lastSibilingIndex = _uiComponent.node.parent?_uiComponent.node.parent.children.length-1:0;\n        _uiComponent.node.setSiblingIndex(_lastSibilingIndex);\n    }\n\n    private hidePopupUI(uiKey?:string){\n        if(this.popupUIs.length<=0) return;\n        let _uiComponent:UIBase;\n        if(isset(uiKey)){\n            let _spawnedUI = this.allSpawnedUICaches.get(uiKey!);\n            if(!isset(_spawnedUI)) return;\n            if(!this.popupUIs.includes(_spawnedUI!)) return;\n            _uiComponent = _spawnedUI!;\n            this.popupUIs.splice(this.popupUIs.indexOf(_uiComponent),1);\n        }\n        else\n            _uiComponent = this.popupUIs.pop()!;\n        if(isset(_uiComponent)) return;\n        CallFunction(_uiComponent!,\"handleHide\");\n    }\n    \n\n    start(){\n    }\n\n    private destroyUIs(uis:string[]){\n        // 销毁UI\n        Array.from(this.allSpawnedUICaches.keys())\n            .filter(_uiKey=>uis.includes(_uiKey))\n            .map(_uiKey=>this.allSpawnedUICaches.get(_uiKey)!)\n            .forEach(_ui=>{\n                this.Hide(_ui.UIKey);\n                _ui.destroy();\n                this.allSpawnedUICaches.delete(_ui.UIKey);\n            });\n\n        Array.from(this.standaloneUIs.keys()).filter(_uiKey=>uis.includes(_uiKey))\n            .forEach(_uiKey=>{\n                this.standaloneUIs.delete(_uiKey);\n            });\n\n        Array.from(this.normalUIs.keys()).filter(_uiKey=>uis.includes(_uiKey))\n            .forEach(_uiKey=>{\n                this.normalUIs.delete(_uiKey);\n            });\n\n        this.popupUIs\n            .filter(_ui=>uis.includes(_ui.UIKey))\n            .forEach(_ui=>{\n                this.popupUIs.splice(this.popupUIs.indexOf(_ui),1);\n            });\n    }\n\n    private sceneName:string;\n    private onEnterScene(sceneName:string)\n    {\n        /**\n         * 销毁上一场景UI   -> 创建当前场景UI\n         */\n\n        this.sceneName = sceneName;\n        let _allUIs = this.config.GetSceneUIs(sceneName);\n        let _newUIs = _allUIs.map(_ui=>_ui.name);\n\n        let _currentUIs = Array.from(this.allSpawnedUICaches.keys());\n        let _prepare2DestroyUIs = _currentUIs.filter(_ui=>!_newUIs.includes(_ui));\n        this.destroyUIs(_prepare2DestroyUIs);\n\n        let _prepare2SpawnUIs = _newUIs.filter(_ui=>!_currentUIs.includes(_ui));\n        console.warn(_newUIs, _currentUIs, _prepare2SpawnUIs);\n        \n        this.spawnUIs(this.config.ConvertUIKeys2UINodeInfo(_prepare2SpawnUIs));\n    }\n\n    private spawnUIs(uis:UINodeInfo[]){\n        uis.forEach(_ui=>{\n            this.spawnUI(_ui);\n        });\n    }\n\n    private spawnUI(uiInfo:UINodeInfo){\n        let _uiKey = uiInfo.name;\n        let _uiScript = uiInfo.script??_uiKey;\n        let _assetName = uiInfo.asset??_uiKey;\n        let _uiType = uiInfo.type??UIType.Normal;\n\n        if(!MetaData.IsUIScriptRegistered(_uiScript)){\n            console.warn(\"No ui script registered for ui %s\", _uiScript);\n        }\n\n        let _uiPrefab = ResourceManager.Instance.Get<Prefab>(_assetName, this.sceneName);\n        if(this.allSpawnedUICaches.has(_uiKey)) return;\n        if(!isset(_uiPrefab)){\n            console.log(\"can not find asset %s\", _assetName);\n            return;\n        };\n\n        _uiPrefab = _uiPrefab!;\n        const _uiNode:Node = instantiate(_uiPrefab);\n        _uiNode.parent = this.getParentNode(_uiType);\n        let _component:UIBase = <UIBase>_uiNode.addComponent(MetaData.GetUIScriptConstructor(_uiScript)!);\n\n        CallFunction(_component, \"spawned\");\n\n        Reflect.set(_component,\"__uiKey\", _uiKey);\n        Reflect.set(_component,\"__uiType\", _uiType);\n\n        _component.node.active = false;\n        this.allSpawnedUICaches.set(_uiKey,_component);\n    }\n\n    private getParentNode(uiType:string) : Node|null{\n        if(uiType === \"Normal\"){\n            return this.NormalUIRoot;\n        }else if(uiType === \"Standalone\"){\n            return this.StandaloneUIRoot;\n        }else if(uiType===\"Popup\"){\n            return this.PopupUIRoot;\n        }\n        return null;\n    }\n\n}","import { singleton } from \"mrba-cchper/node_modules/mrba-eshper\";\r\n\r\n\r\nexport abstract class EventBase{}\r\n\r\nexport class SYS_UPDATE extends EventBase{}\r\nexport class SYS_START  extends EventBase{}\r\n\r\n@singleton\r\nexport class EventManager\r\n{\r\n    \r\n    public Register<T extends EventBase>(eventHandler:(event:T)=>void)\r\n    {\r\n        console.log(\"!!!!!!!!!!! Register !!!!!!!!!!!!!!!!!!\")\r\n        console.log(eventHandler)\r\n    }\r\n\r\n    public Unregister<T extends EventBase>(eventHandler:(event:T)=>void)\r\n    {\r\n\r\n    }\r\n\r\n    private initialize(){\r\n\r\n    }\r\n}","import { singleton } from \"mrba-eshper\";\nimport { Constructor, ISceneScript, MetaData, StartSceneName } from \"../TypeDefinitions\";\n\n@singleton\nexport class SceneScriptManager\n{\n    private sceneName:string = '';\n    private scripts:Map<string,ISceneScript> = new Map<string,ISceneScript>();\n    constructor(){\n        this.SceneName = StartSceneName;\n    }\n\n    public set SceneName(value:string){\n        this.sceneName = value;\n        let _sceneScriptName = `${this.sceneName}Script`;\n\n        if(!MetaData.IsSceneScriptRegistered(_sceneScriptName)) return;\n        let _sceneScriptConstructor:Constructor = MetaData.GetSceneScriptConstrutor(_sceneScriptName)!;\n        \n        this.scripts.set(this.sceneName, new _sceneScriptConstructor());\n    }\n\n    public InvokeStartDelegate(){\n        this.invoke('start');\n    }\n\n    private invoke(funcName:string,...args:any[]){\n        if(!this.scripts.get(this.sceneName)) return;\n        let _sceneScript:ISceneScript = this.scripts.get(this.sceneName)!;\n        let _func = Reflect.get(_sceneScript,funcName);\n        if(_func!==undefined){\n            Reflect.apply(_func,_sceneScript,[]);\n        }\n    }\n\n}","import { CallFunction, isset, Logger, singleton } from \"mrba-eshper\";\nimport { ResConfig } from \"../ResourceManager/ResConfig\";\nimport { ResourceManager } from \"../ResourceManager/ResourceManager\";\nimport { StartSceneName } from \"../TypeDefinitions\";\nimport { UIManager } from \"../UIManager/UIManager\";\nimport { SceneScriptManager } from \"./SceneScriptManager\";\n\n@singleton\nexport class SceneManager\n{\n    private resConfig:ResConfig  = new ResConfig();\n    private scriptManager:SceneScriptManager = new SceneScriptManager();\n    private sceneName:string = StartSceneName;\n    public static Instance:SceneManager;\n\n    public get SceneName():string{\n        return this.sceneName;\n    }\n    private setSceneName(val:string){\n        this.sceneName = val;\n        this.scriptManager.SceneName = val;\n        Reflect.set(ResourceManager.Instance, \"sceneName\", this.sceneName);\n    }\n\n    constructor(){\n        Reflect.set(SceneManager,\"Instance\",this);\n    }\n\n    private initialize()\n    {\n        this.setSceneName(StartSceneName);\n        this.Load(StartSceneName);\n    }\n\n    public Load(sceneName:string, progress?:(progress:number)=>void, completed?:()=>void){\n        /**\n         * 预加载 场景 -> 加载场景  -> 加载场景资源 -> UI资源处理-> 场景加载完成\n         */\n        Logger.Log(\"开始加载场景 %s\", sceneName);\n        ResourceManager.Instance.loadScene(sceneName,(completedcount,totalCount,item)=>{\n            if(isset(progress))\n                progress!(completedcount / totalCount);\n\n        },(error, sceneAsset)=>{\n            // \n            Logger.Log(\"场景加载完成..\", UIManager.Instance);\n            // 加载场景自定义资源\n            ResourceManager.Instance.LoadSceneRes([sceneName]).then(()=>{\n                CallFunction(UIManager.Instance, \"onEnterScene\", sceneName);\n\n                // 场景切换完成\n                this.setSceneName(sceneName);\n                this.scriptManager.InvokeStartDelegate();\n                this.onSceneLoaded(sceneName);\n                if(isset(progress))\n                    progress!(1);\n                if(isset(completed))\n                    completed!();\n            });\n        });\n    }\n\n    private onSceneLoaded(sceneName:string){\n        \n    }   \n}","import { EventManager } from \"mrba-cchper/src/core/EventManager/EventManager\";\nimport { ResourceManager } from \"../core/ResourceManager/ResourceManager\";\nimport { SceneManager } from \"../core/SceneManager/SceneManager\";\nimport { UIManager } from \"../core/UIManager/UIManager\";\n\nexport class Managements{\n    public static readonly UI:UIManager = UIManager.Instance;\n    public static readonly Resource:ResourceManager = new ResourceManager();\n    public static readonly Scene:SceneManager = new SceneManager();\n    public static readonly Event:EventManager = new EventManager();\n}","import { _decorator, game, JsonAsset } from \"cc\";\nimport { CallFunction } from 'mrba-eshper';\nconst { ccclass, property, executionOrder } = _decorator;\n\nimport { UIManager } from 'mrba-cchper/src/core/UIManager/UIManager';\nimport { Managements } from 'mrba-cchper/src/facades/Managements';\nimport { BaseComponent } from 'mrba-cchper/src/utils/CCUtils';\n\n\n@ccclass('CCHperEntry')\n@executionOrder(-1000)\nexport class CCHperEntry extends BaseComponent {\n\n    @property({\n        type: JsonAsset,\n        tooltip:\"资源配置文件, 默认加载 resources/configs/res.json\"\n    })\n    private resConfig: JsonAsset = null;\n\n    @property({\n        type: JsonAsset,\n        tooltip:\"UI配置文件, 默认加载 resources/configs/uis.json\"\n    })\n    private uiConfig: JsonAsset = null;\n\n    readonly initializeFunction:string = \"initialize\";\n    \n    onLoad(){\n        game.addPersistRootNode(this.node);\n        this.initialize();\n    }\n\n    initialize(){\n        let _uiManager = this.Get(\"UIRoot\")?.addComponent(UIManager);\n        Reflect.set(Managements,\"UI\",_uiManager);\n\n        // 初始化依赖于固有资源的管理器\n        CallFunction(Managements.Resource,this.initializeFunction, this.resConfig).then(()=>{\n            CallFunction(<UIManager>_uiManager,this.initializeFunction, this.uiConfig).then(()=>{\n                CallFunction(Managements.Scene,this.initializeFunction);\n            });\n        });\n    }\n\n    start () {\n        \n    }\n\n    update (deltaTime: number) {\n        // Your update function goes here.\n    }\n}\n","import { sys } from \"cc\";\n\nexport class Platform{\n    public static get IsBrowser():boolean{\n        return sys['isBrowser']??false;\n    }\n}"],"names":["CallFunction","isset","singleton","ParallelForEach","Logger","ccclass","executionOrder"],"mappings":"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"}